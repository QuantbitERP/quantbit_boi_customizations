[
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Save",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2025-01-01 19:01:25.122392",
  "module": null,
  "name": "Bonus Salary Slip",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Salary Slip",
  "script": "if doc.payroll_entry:\n    is_bonus = frappe.db.get_value(\"Payroll Entry\", {\"name\": doc.payroll_entry}, \"custom_is_bonus\")\n    if is_bonus:\n        doc.custom_is_bonus = is_bonus\n\n        # Initialize total deduction\n        total_deduct = 0\n\n        # Calculate total deductions using a for loop\n        if doc.deductions:\n            for deduction in doc.deductions:\n                total_deduct = total_deduct + deduction.amount or 0  # Add amount or default to 0\n\n            # frappe.throw(str(total_deduct))\n        # Set the total deduction and related fields\n        doc.total_deduction = total_deduct\n        doc.net_pay = doc.gross_pay - doc.total_deduction\n        doc.rounded_total = doc.net_pay\n        doc.year_to_date = doc.net_pay\n        doc.month_to_date = doc.net_pay\n",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "Before Validate",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2025-01-01 16:49:54.104738",
  "module": null,
  "name": "custom bonus",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Salary Slip",
  "script": "if doc.payroll_entry:\n    is_bonus = frappe.db.get_value(\"Payroll Entry\",{\"name\":doc.payroll_entry},\"custom_is_bonus\")\n    if is_bonus:\n        doc.custom_is_bonus = is_bonus",
  "script_type": "DocType Event"
 },
 {
  "allow_guest": 0,
  "api_method": null,
  "cron_format": null,
  "disabled": 0,
  "docstatus": 0,
  "doctype": "Server Script",
  "doctype_event": "After Save",
  "enable_rate_limit": 0,
  "event_frequency": "All",
  "modified": "2025-01-01 19:01:47.738706",
  "module": null,
  "name": "After Save Deduction Calculate",
  "rate_limit_count": 5,
  "rate_limit_seconds": 86400,
  "reference_doctype": "Salary Slip",
  "script": "if doc.custom_is_bonus:\n    # is_bonus = frappe.db.get_value(\"Payroll Entry\", {\"name\": doc.payroll_entry}, \"custom_is_bonus\")\n    # if is_bonus:\n    #     doc.custom_is_bonus = is_bonus\n\n        # Initialize total deduction\n    total_deduct = 0\n\n    # Calculate total deductions using a for loop\n    if doc.deductions:\n        for deduction in doc.deductions:\n            total_deduct = total_deduct + deduction.amount or 0  # Add amount or default to 0\n\n        # frappe.throw(str(total_deduct))\n    # Set the total deduction and related fields\n    doc.total_deduction = total_deduct\n    doc.net_pay = doc.gross_pay - doc.total_deduction\n    doc.rounded_total = doc.net_pay\n    doc.year_to_date = doc.net_pay\n    doc.month_to_date = doc.net_pay\n",
  "script_type": "DocType Event"
 }
]